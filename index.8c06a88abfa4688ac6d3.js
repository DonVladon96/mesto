(()=>{"use strict";var t={};function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e(t)}function n(t,n){for(var r=0;r<n.length;r++){var o=n[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(void 0,i=function(t,n){if("object"!==e(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,"string");if("object"!==e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(o.key),"symbol"===e(i)?i:String(i)),o)}var i}t.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),(()=>{var e;t.g.importScripts&&(e=t.g.location+"");var n=t.g.document;if(!e&&n&&(n.currentScript&&(e=n.currentScript.src),!e)){var r=n.getElementsByTagName("script");r.length&&(e=r[r.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),t.p=e})();var r=function(){function t(e,n){var r=e.items,o=e.renderer;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._cards=r,this._renderer=o,this._container=n}var e,r;return e=t,(r=[{key:"renderItems",value:function(){var t=this;this._cards.forEach((function(e){t._renderer(e)}))}},{key:"addItem",value:function(t){this._container.prepend(t)}}])&&n(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,i=function(t,e){if("object"!==o(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===o(i)?i:String(i)),r)}var i}var u=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._popupItem=e,this._closeButton=this._popupItem.querySelector(".popup__close"),this._handleEscClose=this._handleEscClose.bind(this)}var e,n;return e=t,(n=[{key:"_handleEscClose",value:function(t){"Escape"===t.key&&this.close()}},{key:"_handleCloseOverlay",value:function(t){t.target===t.currentTarget&&this.close()}},{key:"open",value:function(){this._popupItem.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscClose)}},{key:"close",value:function(){this._popupItem.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleEscClose)}},{key:"setEventListeners",value:function(){var t=this;this._closeButton.addEventListener("click",(function(){t.close()})),this._popupItem.addEventListener("click",(function(e){return t._handleCloseOverlay(e)}))}}])&&i(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function c(t){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c(t)}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==c(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==c(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===c(o)?o:String(o)),r)}var o}function l(){return l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=p(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},l.apply(this,arguments)}function s(t,e){return s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},s(t,e)}function p(t){return p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},p(t)}var f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}(u,t);var e,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=p(r);if(o){var n=p(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===c(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function u(t){var e,n=t.popupSelector,r=t.submitForm;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(e=i.call(this,n))._submitForm=r,e._popupForm=e._popupItem.querySelector(".popup__form"),e._formList=e._popupForm.querySelectorAll(".popup__input"),e}return e=u,(n=[{key:"setInputValues",value:function(t){this._formList.forEach((function(e){e.value=t[e.name]}))}},{key:"_getInputValues",value:function(){var t={};return this._formList.forEach((function(e){t[e.name]=e.value})),t}},{key:"setEventListeners",value:function(){var t=this;l(p(u.prototype),"setEventListeners",this).call(this),this._popupForm.addEventListener("submit",(function(e){e.preventDefault(),t._submitForm(t._getInputValues())}))}},{key:"close",value:function(){l(p(u.prototype),"close",this).call(this),this._popupForm.reset()}}])&&a(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),u}(u);function y(t){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},y(t)}function m(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==y(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==y(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===y(o)?o:String(o)),r)}var o}function b(){return b="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=d(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},b.apply(this,arguments)}function v(t,e){return v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},v(t,e)}function d(t){return d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},d(t)}var h=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&v(t,e)}(u,t);var e,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=d(r);if(o){var n=d(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===y(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function u(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(e=i.call(this,t))._popupSelector=t,e._popupImage=e._popupItem.querySelector(".popup__image"),e._popupCaption=e._popupItem.querySelector(".popup__caption"),e}return e=u,(n=[{key:"open",value:function(t,e){this._popupImage.src=e,this._popupImage.alt=t,this._popupCaption.textContent=t,b(d(u.prototype),"open",this).call(this)}}])&&m(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),u}(u);function _(t){return _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_(t)}function g(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==_(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==_(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===_(o)?o:String(o)),r)}var o}var S=function(){function t(e){var n=e.dataName,r=e.dataJob;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._nameElement=n,this._jobElement=r}var e,n;return e=t,(n=[{key:"getUserInfo",value:function(){return{dataName:this._nameElement.textContent,dataJob:this._jobElement.textContent}}},{key:"setUserInfo",value:function(t){var e=t.dataName,n=t.dataJob;this._nameElement.textContent=e,this._jobElement.textContent=n}}])&&g(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();const w=t.p+"0d930819a1b441eca091.jpg",E=t.p+"f558b03fc808c1b1cc86.png",k=t.p+"4c6db4ac626fb3ce0d02.png",j=t.p+"e962dac13621f536c22b.png",O=t.p+"3af6d930a9f9bfe998ac.png",P=t.p+"9913573b8a469f487917.jpg";var C=document.querySelector(".profile__edit"),I=document.querySelector(".popup_edit-profile"),L=(document.querySelector(".popup__close"),document.querySelector("#popup-form")),q=(document.querySelector("#popup-form-card"),L.querySelector("#input-name"),L.querySelector("#input-job"),document.querySelector(".profile__info")),T=q.querySelector(".profile__name"),B=q.querySelector(".profile__aboute"),R=document.querySelector("#card-item-template"),x=document.querySelector(".elements"),N=document.querySelector(".popup_image-open"),F=(N.querySelector(".popup__image"),N.querySelector(".popup__caption"),document.querySelector(".profile__add-button")),A=document.querySelector(".popup-cards"),J=(A.querySelector("#card-name"),A.querySelector("#card-link"),[{name:"Coffee",link:w},{name:"Глинтвейн",link:E},{name:"Пианист",link:k},{name:"Космонавт",link:j},{name:"Вкуснотища!",link:O},{name:"Photo",link:P}]);function V(t){return V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},V(t)}function D(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==V(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==V(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===V(o)?o:String(o)),r)}var o}var U=function(){function t(e,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._name=e.name,this._link=e.link,this._handleCardClick=r,this._container=n.content.querySelector(".element").cloneNode(!0),this._likeButton=this._container.querySelector(".element__button-like"),this._cardTitle=this._container.querySelector(".element__title"),this._cardImage=this._container.querySelector(".element__photo"),this._buttonTrash=this._container.querySelector(".element__button-trash")}var e,n;return e=t,(n=[{key:"_setCardImage",value:function(){return this._cardImage=this._container.querySelector(".element__photo"),this._cardImage.setAttribute("src",this._link),this._cardImage.setAttribute("alt",this._name),this._cardImage}},{key:"_setCardTitle",value:function(){return this._cardTitle=this._container.querySelector(".element__title"),this._cardTitle.textContent=this._name,this._cardTitle}},{key:"_deleteCard",value:function(){this._container.remove()}},{key:"_toggleLike",value:function(){this._likeButton.classList.toggle("element__button-like_active")}},{key:"_setEventListeners",value:function(){var t=this;this._cardImage.addEventListener("click",(function(){t._handleCardClick(t._name,t._link)})),this._buttonTrash=this._container.querySelector(".element__button-trash"),this._buttonTrash.addEventListener("click",(function(){t._deleteCard()})),this._likeButton.addEventListener("click",(function(){t._toggleLike()}))}},{key:"getCard",value:function(){return this._setCardTitle(),this._setCardImage(),this._setEventListeners(),this._container}}])&&D(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function $(t){return $="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$(t)}function M(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==$(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==$(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===$(o)?o:String(o)),r)}var o}const z=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._config=e,this._formElement=n,this._inputList=Array.from(this._formElement.querySelectorAll(this._config.inputSelector)),this._formButton=this._formElement.querySelector(this._config.submitButtonSelector)}var e,n;return e=t,(n=[{key:"_showInputError",value:function(t){var e=this._formElement.querySelector(".".concat(t.id,"-error"));e.classList.add(this._config.errorClass),e.textContent=t.validationMessage,t.classList.add(this._config.inputErrorClass)}},{key:"_hideInputError",value:function(t){var e=this._formElement.querySelector(".".concat(t.id,"-error"));e.classList.remove(this._config.errorClass),e.textContent="",t.classList.remove(this._config.inputErrorClass)}},{key:"_checkInputValidity",value:function(t){t.validity.valid?this._hideInputError(t):this._showInputError(t)}},{key:"_hasInvalidInput",value:function(){return this._inputList.some((function(t){return!t.validity.valid}))}},{key:"toggleButtonState",value:function(){this._hasInvalidInput()?(this._formButton.classList.add(this._config.inactiveButtonClass),this._formButton.disabled=!0):(this._formButton.classList.remove(this._config.inactiveButtonClass),this._formButton.disabled=!1)}},{key:"_setEventListeners",value:function(){var t=this;this.toggleButtonState(),this._inputList.forEach((function(e){e.addEventListener("input",(function(){t._checkInputValidity(e),t.toggleButtonState()}))})),this._formElement.addEventListener("reset",(function(){setTimeout((function(){t.toggleButtonState()}),0)}))}},{key:"enableValidation",value:function(){this._setEventListeners()}}])&&M(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();var G=new f({popupSelector:A,submitForm:function(t){var e=t.cardName,n=t.cardLink;Z.addItem(H({name:e,link:n})),G.close()}});function H(t){return new U(t,R,X).getCard()}F.addEventListener("click",(function(){G.open()})),G.setEventListeners();var K=new f({popupSelector:I,submitForm:function(t){var e=t.dataName,n=t.dataJob;Q.setUserInfo({dataName:e,dataJob:n}),K.close()}});K.setEventListeners();var Q=new S({dataName:T,dataJob:B});C.addEventListener("click",(function(){var t=Q.getUserInfo(),e=t.dataName,n=t.dataJob;K.setInputValues({dataName:e,dataJob:n}),K.open()}));var W=new h(N);function X(t,e){W.open(t,e)}W.setEventListeners();var Y,Z=new r({items:J,renderer:function(t){Z.addItem(H(t))}},x);Z.renderItems(),Y={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__submit-button",activeButtonClass:"popup__submit-button_valid",inactiveButtonClass:"popup__submit-button_invalid",inputErrorClass:"popup__input_type_error",errorClass:"popup__input-error_visible"},Array.from(document.querySelectorAll(Y.formSelector)).forEach((function(t){new z(Y,t).enableValidation()}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RUFBZSxJQUFJaEYsRUFBUyxDQUNoQ0MsU0FBVVEsRUFDVlAsUUFBU1EsSUFJWEwsRUFBMkI5QixpQkFBaUIsU0FBUyxXQUNuRCxNQUE4QnlHLEVBQWFFLGNBQW5DakYsRUFBUSxFQUFSQSxTQUFVQyxFQUFPLEVBQVBBLFFBQ2xCNkUsRUFBZ0JJLGVBQWUsQ0FDN0JsRixTQUFBQSxFQUNBQyxRQUFBQSxJQUdGNkUsRUFBZ0JGLE1BQ2xCLElBR0EsSUFBTU8sRUFBa0IsSUFBSTNGLEVBQWVvQixHQUszQyxTQUFTYSxFQUFnQnRDLEVBQU1TLEdBQzdCdUYsRUFBZ0JQLEtBQUt6RixFQUFNUyxFQUM3QixDQUxBdUYsRUFBZ0JOLG9CQVFoQixJQWMwQk8sRUFkcEJaLEVBQWtCLElBQUk1SCxFQUMxQixDQUNFRSxNQUFPaUUsRUFDUGhFLFNBQVUsU0FBQ0ssR0FDWG9ILEVBQWdCQyxRQUFRQyxFQUFXdEgsR0FDbkMsR0FFRnVELEdBR0Y2RCxFQUFnQmEsY0FJVUQsRUg5Q00sQ0FDOUJFLGFBQWMsZUFDZHJDLGNBQWUsZ0JBQ2ZFLHFCQUFzQix3QkFDdEJvQyxrQkFBbUIsNkJBQ25CdkIsb0JBQXFCLCtCQUNyQlAsZ0JBQWlCLDBCQUNqQkYsV0FBWSw4Qkd3Q0tSLE1BQU1DLEtBQUs3RyxTQUFTNEMsaUJBQWlCcUcsRUFBT0UsZUFFcERuSSxTQUFRLFNBQUN3RixHQUNVLElBQUk2QyxFQUFjSixFQUFRekMsR0FDbEM4QyxrQkFDcEIsRyIsInNvdXJjZXMiOlsid2VicGFjazovL21lc3RvL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL21lc3RvL3dlYnBhY2svcnVudGltZS9nbG9iYWwiLCJ3ZWJwYWNrOi8vbWVzdG8vd2VicGFjay9ydW50aW1lL3B1YmxpY1BhdGgiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9wYWdlcy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBUaGUgcmVxdWlyZSBzY29wZVxudmFyIF9fd2VicGFja19yZXF1aXJlX18gPSB7fTtcblxuIiwiX193ZWJwYWNrX3JlcXVpcmVfXy5nID0gKGZ1bmN0aW9uKCkge1xuXHRpZiAodHlwZW9mIGdsb2JhbFRoaXMgPT09ICdvYmplY3QnKSByZXR1cm4gZ2xvYmFsVGhpcztcblx0dHJ5IHtcblx0XHRyZXR1cm4gdGhpcyB8fCBuZXcgRnVuY3Rpb24oJ3JldHVybiB0aGlzJykoKTtcblx0fSBjYXRjaCAoZSkge1xuXHRcdGlmICh0eXBlb2Ygd2luZG93ID09PSAnb2JqZWN0JykgcmV0dXJuIHdpbmRvdztcblx0fVxufSkoKTsiLCJ2YXIgc2NyaXB0VXJsO1xuaWYgKF9fd2VicGFja19yZXF1aXJlX18uZy5pbXBvcnRTY3JpcHRzKSBzY3JpcHRVcmwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fLmcubG9jYXRpb24gKyBcIlwiO1xudmFyIGRvY3VtZW50ID0gX193ZWJwYWNrX3JlcXVpcmVfXy5nLmRvY3VtZW50O1xuaWYgKCFzY3JpcHRVcmwgJiYgZG9jdW1lbnQpIHtcblx0aWYgKGRvY3VtZW50LmN1cnJlbnRTY3JpcHQpXG5cdFx0c2NyaXB0VXJsID0gZG9jdW1lbnQuY3VycmVudFNjcmlwdC5zcmNcblx0aWYgKCFzY3JpcHRVcmwpIHtcblx0XHR2YXIgc2NyaXB0cyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwic2NyaXB0XCIpO1xuXHRcdGlmKHNjcmlwdHMubGVuZ3RoKSBzY3JpcHRVcmwgPSBzY3JpcHRzW3NjcmlwdHMubGVuZ3RoIC0gMV0uc3JjXG5cdH1cbn1cbi8vIFdoZW4gc3VwcG9ydGluZyBicm93c2VycyB3aGVyZSBhbiBhdXRvbWF0aWMgcHVibGljUGF0aCBpcyBub3Qgc3VwcG9ydGVkIHlvdSBtdXN0IHNwZWNpZnkgYW4gb3V0cHV0LnB1YmxpY1BhdGggbWFudWFsbHkgdmlhIGNvbmZpZ3VyYXRpb25cbi8vIG9yIHBhc3MgYW4gZW1wdHkgc3RyaW5nIChcIlwiKSBhbmQgc2V0IHRoZSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyB2YXJpYWJsZSBmcm9tIHlvdXIgY29kZSB0byB1c2UgeW91ciBvd24gbG9naWMuXG5pZiAoIXNjcmlwdFVybCkgdGhyb3cgbmV3IEVycm9yKFwiQXV0b21hdGljIHB1YmxpY1BhdGggaXMgbm90IHN1cHBvcnRlZCBpbiB0aGlzIGJyb3dzZXJcIik7XG5zY3JpcHRVcmwgPSBzY3JpcHRVcmwucmVwbGFjZSgvIy4qJC8sIFwiXCIpLnJlcGxhY2UoL1xcPy4qJC8sIFwiXCIpLnJlcGxhY2UoL1xcL1teXFwvXSskLywgXCIvXCIpO1xuX193ZWJwYWNrX3JlcXVpcmVfXy5wID0gc2NyaXB0VXJsOyIsImV4cG9ydCBjbGFzcyBTZWN0aW9uIHtcbiAgY29uc3RydWN0b3IoeyBpdGVtcywgcmVuZGVyZXIgfSwgY29udGFpbmVyU2VsZWN0b3IpIHtcbiAgICB0aGlzLl9jYXJkcyA9IGl0ZW1zO1xuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XG4gICAgdGhpcy5fY29udGFpbmVyID0gY29udGFpbmVyU2VsZWN0b3I7XG4gIH1cblxuICByZW5kZXJJdGVtcygpIHtcbiAgICB0aGlzLl9jYXJkcy5mb3JFYWNoKGl0ZW0gPT4ge1xuICAgICAgdGhpcy5fcmVuZGVyZXIoaXRlbSlcbiAgICB9KTtcbiAgfVxuXG4gIGFkZEl0ZW0oZWxlbWVudCkge1xuICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGVsZW1lbnQpO1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcbiAgICB0aGlzLl9wb3B1cEl0ZW0gPSBwb3B1cFNlbGVjdG9yO1xuICAgIHRoaXMuX2Nsb3NlQnV0dG9uID0gdGhpcy5fcG9wdXBJdGVtLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2Nsb3NlXCIpO1xuICAgIHRoaXMuX2hhbmRsZUVzY0Nsb3NlID0gdGhpcy5faGFuZGxlRXNjQ2xvc2UuYmluZCh0aGlzKTtcbiAgfVxuXG4gIF9oYW5kbGVFc2NDbG9zZShldnQpIHtcbiAgICBpZiAoZXZ0LmtleSA9PT0gXCJFc2NhcGVcIikge1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH1cbiAgfVxuXG4gIF9oYW5kbGVDbG9zZU92ZXJsYXkoZXZlbnQpIHtcbiAgICBpZiAoZXZlbnQudGFyZ2V0ICE9PSBldmVudC5jdXJyZW50VGFyZ2V0KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuY2xvc2UoKTtcbiAgfVxuXG4gIG9wZW4oKSB7XG4gICAgdGhpcy5fcG9wdXBJdGVtLmNsYXNzTGlzdC5hZGQoXCJwb3B1cF9vcGVuZWRcIik7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICB9XG5cbiAgY2xvc2UoKSB7XG4gICAgdGhpcy5fcG9wdXBJdGVtLmNsYXNzTGlzdC5yZW1vdmUoXCJwb3B1cF9vcGVuZWRcIik7XG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fY2xvc2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9KTtcblxuICAgIHRoaXMuX3BvcHVwSXRlbS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGV2dCkgPT5cbiAgICAgIHRoaXMuX2hhbmRsZUNsb3NlT3ZlcmxheShldnQpXG4gICAgKTtcbiAgfVxufVxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHsgcG9wdXBTZWxlY3Rvciwgc3VibWl0Rm9ybSB9KSB7XG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XG4gICAgdGhpcy5fc3VibWl0Rm9ybSA9IHN1Ym1pdEZvcm07XG4gICAgdGhpcy5fcG9wdXBGb3JtID0gdGhpcy5fcG9wdXBJdGVtLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2Zvcm1cIik7XG4gICAgLy8gdGhpcy5fZm9ybUxpc3QgPSBBcnJheS5mcm9tKHRoaXMuX3BvcHVwRm9ybS5xdWVyeVNlbGVjdG9yQWxsKFwiLnBvcHVwX19pbnB1dFwiKSk7XG4gICAgdGhpcy5fZm9ybUxpc3QgPSB0aGlzLl9wb3B1cEZvcm0ucXVlcnlTZWxlY3RvckFsbChcIi5wb3B1cF9faW5wdXRcIik7XG4gIH1cblxuICBzZXRJbnB1dFZhbHVlcyhkYXRhKSB7XG4gICAgdGhpcy5fZm9ybUxpc3QuZm9yRWFjaCgoaW5wdXQpID0+IHtcbiAgICAgIGlucHV0LnZhbHVlID0gZGF0YVtpbnB1dC5uYW1lXVxuICAgIH0pXG4gIH1cblxuXG4gIF9nZXRJbnB1dFZhbHVlcygpIHtcbiAgICBjb25zdCBpbnB1dFZhbHVlID0ge307XG5cbiAgICB0aGlzLl9mb3JtTGlzdC5mb3JFYWNoKGlucHV0ID0+IHtcbiAgICAgIGlucHV0VmFsdWVbaW5wdXQubmFtZV0gPSBpbnB1dC52YWx1ZTtcbiAgICB9KTtcblxuICAgIHJldHVybiBpbnB1dFZhbHVlO1xuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICB0aGlzLl9wb3B1cEZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZ0KSA9PiB7XG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHRoaXMuX3N1Ym1pdEZvcm0odGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKSk7XG4gICAgfSk7XG4gIH1cblxuICBjbG9zZSgpIHtcbiAgICBzdXBlci5jbG9zZSgpO1xuICAgIHRoaXMuX3BvcHVwRm9ybS5yZXNldCgpO1xuICB9XG59XG5cblxuXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcbiAgICB0aGlzLl9wb3B1cFNlbGVjdG9yID0gcG9wdXBTZWxlY3RvcjtcbiAgICB0aGlzLl9wb3B1cEltYWdlID0gdGhpcy5fcG9wdXBJdGVtLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2ltYWdlXCIpO1xuICAgIHRoaXMuX3BvcHVwQ2FwdGlvbiA9IHRoaXMuX3BvcHVwSXRlbS5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19jYXB0aW9uXCIpO1xuICB9XG5cbiAgb3BlbihuYW1lLCBsaW5rKSB7XG4gICAgdGhpcy5fcG9wdXBJbWFnZS5zcmMgPSBsaW5rO1xuICAgIHRoaXMuX3BvcHVwSW1hZ2UuYWx0ID0gbmFtZTtcbiAgICB0aGlzLl9wb3B1cENhcHRpb24udGV4dENvbnRlbnQgPSBuYW1lO1xuXG4gICAgc3VwZXIub3BlbigpO1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XG4gIGNvbnN0cnVjdG9yKHsgZGF0YU5hbWUsIGRhdGFKb2IgfSkge1xuICAgIHRoaXMuX25hbWVFbGVtZW50ID0gZGF0YU5hbWU7XG4gICAgdGhpcy5fam9iRWxlbWVudCA9IGRhdGFKb2I7XG4gIH1cblxuICBnZXRVc2VySW5mbygpIHtcblxuICAgIHJldHVybiB7XG4gICAgICBkYXRhTmFtZTogdGhpcy5fbmFtZUVsZW1lbnQudGV4dENvbnRlbnQsXG4gICAgICBkYXRhSm9iOiB0aGlzLl9qb2JFbGVtZW50LnRleHRDb250ZW50XG4gICAgfTtcbiAgfVxuXG4gIHNldFVzZXJJbmZvKHtkYXRhTmFtZSwgZGF0YUpvYn0pIHtcbiAgICB0aGlzLl9uYW1lRWxlbWVudC50ZXh0Q29udGVudCA9IGRhdGFOYW1lO1xuICAgIHRoaXMuX2pvYkVsZW1lbnQudGV4dENvbnRlbnQgPSBkYXRhSm9iO1xuICB9O1xufVxuIiwiLy/QutCw0YDRgtC40L3QutC4INC00LvRjyDQutCw0YDRgtC+0YfQtdC6XG5pbXBvcnQgQ2FyZEltYWdlc0NvZmZlIGZyb20gJy4uL2ltYWdlcy9jb2ZmZS5qcGcnXG5pbXBvcnQgQ2FyZEltYWdlc0p1aWNlIGZyb20gJy4uL2ltYWdlcy9vcmFuZ2UtanVpY2UucG5nJ1xuaW1wb3J0IENhcmRJbWFnZXNQaWFubyBmcm9tICcuLi9pbWFnZXMvcGlhbm8ucG5nJ1xuaW1wb3J0IENhcmRJbWFnZXNDb3NtbyBmcm9tICcuLi9pbWFnZXMvQ0NDUC5wbmcnXG5pbXBvcnQgQ2FyZEltYWdlc1BpenphIGZyb20gJy4uL2ltYWdlcy9waXp6YS5wbmcnXG5pbXBvcnQgQ2FyZEltYWdlc1Bob3RvIGZyb20gJy4uL2ltYWdlcy9waG90b2dyYXBoLmpwZydcblxuLy/QutC+0L3RgdGC0LDQvdGC0YtcbmV4cG9ydCBjb25zdCBidXR0b25PcGVuUG9wdXBFZGl0UHJvZmlsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19lZGl0Jyk7XG5leHBvcnQgY29uc3QgcG9wdXBFZGl0UHJvZmlsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9lZGl0LXByb2ZpbGUnKTtcbmV4cG9ydCBjb25zdCBidXR0b25DbG9zZVBvcHVwRWRpdFByb2ZpbGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2Nsb3NlJyk7XG5leHBvcnQgY29uc3QgcG9wdXBGb3JtRWRpdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNwb3B1cC1mb3JtJylcbmV4cG9ydCBjb25zdCBwb3B1cEZvcm1BZGQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcG9wdXAtZm9ybS1jYXJkJyk7XG5leHBvcnQgY29uc3QgbmFtZUlucHV0ID0gcG9wdXBGb3JtRWRpdC5xdWVyeVNlbGVjdG9yKCcjaW5wdXQtbmFtZScpXG5leHBvcnQgY29uc3Qgam9iSW5wdXQgPSBwb3B1cEZvcm1FZGl0LnF1ZXJ5U2VsZWN0b3IoJyNpbnB1dC1qb2InKVxuZXhwb3J0IGNvbnN0IHByb2ZpbGVJbmZvID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2luZm8nKVxuZXhwb3J0IGNvbnN0IHByb2ZpbGVOYW1lID0gcHJvZmlsZUluZm8ucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX25hbWUnKVxuZXhwb3J0IGNvbnN0IHByb2ZpbGVKb2IgPSBwcm9maWxlSW5mby5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fYWJvdXRlJylcbmV4cG9ydCBjb25zdCB0ZW1wbGF0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjY2FyZC1pdGVtLXRlbXBsYXRlXCIpO1xuZXhwb3J0IGNvbnN0IGNhcmRDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRzXCIpO1xuZXhwb3J0IGNvbnN0IHBvcHVwSW1hZ2VPcGVuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX2ltYWdlLW9wZW4nKTtcbmV4cG9ydCBjb25zdCBwb3B1cEltYWdlID0gcG9wdXBJbWFnZU9wZW4ucXVlcnlTZWxlY3RvcignLnBvcHVwX19pbWFnZScpO1xuZXhwb3J0IGNvbnN0IHBvcHVwQ2FwdGlvbiA9IHBvcHVwSW1hZ2VPcGVuLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fY2FwdGlvbicpO1xuXG4vLyDQn9CY0KjQldCcINCa0JDQmiDQkiDQktCV0JHQmNCd0JDQoNCVLlxuZXhwb3J0IGNvbnN0IGJ1dHRvbk9wZW5Qb3B1cEFkZENhcmQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2FkZC1idXR0b25cIik7XG5leHBvcnQgY29uc3QgcG9wdXBDYXJkcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXAtY2FyZHNcIik7XG5leHBvcnQgY29uc3QgdGl0bGVJbnB1dCA9IHBvcHVwQ2FyZHMucXVlcnlTZWxlY3RvcihcIiNjYXJkLW5hbWVcIik7XG5leHBvcnQgY29uc3QgbGlua0lucHV0ID0gcG9wdXBDYXJkcy5xdWVyeVNlbGVjdG9yKFwiI2NhcmQtbGlua1wiKTtcblxuXG4vL9C80LDRgdGB0LjQsiDQutCw0YDRgtC+0YfQtdC6XG5leHBvcnQgY29uc3QgY2FyZHMgPSBbXG4gIHtcbiAgICBuYW1lOiAnQ29mZmVlJyxcbiAgICBsaW5rOiBDYXJkSW1hZ2VzQ29mZmVcbiAgfSxcbiAge1xuICAgIG5hbWU6ICfQk9C70LjQvdGC0LLQtdC50L0nLFxuICAgIGxpbms6IENhcmRJbWFnZXNKdWljZVxuICB9LFxuICB7XG4gICAgbmFtZTogJ9Cf0LjQsNC90LjRgdGCJyxcbiAgICBsaW5rOiBDYXJkSW1hZ2VzUGlhbm9cbiAgfSxcbiAge1xuICAgIG5hbWU6ICfQmtC+0YHQvNC+0L3QsNCy0YInLFxuICAgIGxpbms6IENhcmRJbWFnZXNDb3Ntb1xuICB9LFxuICB7XG4gICAgbmFtZTogJ9CS0LrRg9GB0L3QvtGC0LjRidCwIScsXG4gICAgbGluazogQ2FyZEltYWdlc1BpenphXG4gIH0sXG4gIHtcbiAgICBuYW1lOiAnUGhvdG8nLFxuICAgIGxpbms6IENhcmRJbWFnZXNQaG90b1xuICB9XG5dO1xuXG5leHBvcnQgY29uc3QgdmFsaWRhdGlvbkNvbmZpZyA9IHtcbiAgZm9ybVNlbGVjdG9yOiAnLnBvcHVwX19mb3JtJyxcbiAgaW5wdXRTZWxlY3RvcjogJy5wb3B1cF9faW5wdXQnLFxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogJy5wb3B1cF9fc3VibWl0LWJ1dHRvbicsXG4gIGFjdGl2ZUJ1dHRvbkNsYXNzOiAncG9wdXBfX3N1Ym1pdC1idXR0b25fdmFsaWQnLFxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiAncG9wdXBfX3N1Ym1pdC1idXR0b25faW52YWxpZCcsXG4gIGlucHV0RXJyb3JDbGFzczogJ3BvcHVwX19pbnB1dF90eXBlX2Vycm9yJyxcbiAgZXJyb3JDbGFzczogJ3BvcHVwX19pbnB1dC1lcnJvcl92aXNpYmxlJ1xufTtcblxuXG4iLCJjbGFzcyBDYXJkIHtcbiAgY29uc3RydWN0b3IoY2FyZERhdGEsIHNlbGVjdG9yLCBoYW5kbGVDYXJkQ2xpY2spIHtcbiAgICB0aGlzLl9uYW1lID0gY2FyZERhdGEubmFtZTtcbiAgICB0aGlzLl9saW5rID0gY2FyZERhdGEubGluaztcbiAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2sgPSBoYW5kbGVDYXJkQ2xpY2s7XG4gICAgdGhpcy5fY29udGFpbmVyID0gc2VsZWN0b3IuY29udGVudFxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudFwiKVxuICAgICAgLmNsb25lTm9kZSh0cnVlKTtcbiAgICB0aGlzLl9saWtlQnV0dG9uID0gdGhpcy5fY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudF9fYnV0dG9uLWxpa2VcIik7XG4gICAgdGhpcy5fY2FyZFRpdGxlID0gdGhpcy5fY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudF9fdGl0bGVcIik7XG4gICAgdGhpcy5fY2FyZEltYWdlID0gdGhpcy5fY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudF9fcGhvdG9cIik7XG4gICAgdGhpcy5fYnV0dG9uVHJhc2ggPSB0aGlzLl9jb250YWluZXIucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50X19idXR0b24tdHJhc2hcIik7XG4gIH1cblxuICBfc2V0Q2FyZEltYWdlKCkge1xuICAgIHRoaXMuX2NhcmRJbWFnZSA9IHRoaXMuX2NvbnRhaW5lci5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRfX3Bob3RvXCIpO1xuICAgIHRoaXMuX2NhcmRJbWFnZS5zZXRBdHRyaWJ1dGUoXCJzcmNcIiwgdGhpcy5fbGluayk7XG4gICAgdGhpcy5fY2FyZEltYWdlLnNldEF0dHJpYnV0ZShcImFsdFwiLCB0aGlzLl9uYW1lKTtcblxuICAgIHJldHVybiB0aGlzLl9jYXJkSW1hZ2U7XG4gIH1cblxuICBfc2V0Q2FyZFRpdGxlKCkge1xuICAgIHRoaXMuX2NhcmRUaXRsZSA9IHRoaXMuX2NvbnRhaW5lci5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRfX3RpdGxlXCIpO1xuICAgIHRoaXMuX2NhcmRUaXRsZS50ZXh0Q29udGVudCA9IHRoaXMuX25hbWU7XG5cbiAgICByZXR1cm4gdGhpcy5fY2FyZFRpdGxlO1xuICB9XG5cbiAgXG5cbiAgX2RlbGV0ZUNhcmQoKSB7XG4gICAgdGhpcy5fY29udGFpbmVyLnJlbW92ZSgpO1xuICB9XG5cbiAgX3RvZ2dsZUxpa2UoKSB7XG4gICAgdGhpcy5fbGlrZUJ1dHRvbi5jbGFzc0xpc3QudG9nZ2xlKFwiZWxlbWVudF9fYnV0dG9uLWxpa2VfYWN0aXZlXCIpO1xuICB9XG5cbiAgLy/RgdC+0LfQtNCw0Y4g0L/RgNC40LLQsNGC0L3Ri9C5INC80LXRgtC+0LQg0LTQu9GPINGD0YHRgtCw0L3QvtCy0LrQuCDQstGB0LXRhSDQvtCx0YDQsNCx0L7RgtGH0LjQutC+0LIgKHJldyAxKVxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fY2FyZEltYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2sodGhpcy5fbmFtZSwgdGhpcy5fbGluayk7XG4gICAgfSk7XG5cbiAgICB0aGlzLl9idXR0b25UcmFzaCA9IHRoaXMuX2NvbnRhaW5lci5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRfX2J1dHRvbi10cmFzaFwiKTtcbiAgICB0aGlzLl9idXR0b25UcmFzaC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgdGhpcy5fZGVsZXRlQ2FyZCgpO1xuICAgIH0pO1xuXG4gICAgdGhpcy5fbGlrZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgdGhpcy5fdG9nZ2xlTGlrZSgpO1xuICAgIH0pO1xuICB9XG5cbiAgZ2V0Q2FyZCgpIHtcbiAgICB0aGlzLl9zZXRDYXJkVGl0bGUoKTtcbiAgICB0aGlzLl9zZXRDYXJkSW1hZ2UoKTtcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuXG4gICAgcmV0dXJuIHRoaXMuX2NvbnRhaW5lcjtcbiAgfVxufVxuXG5leHBvcnQgeyBDYXJkIH07XG4iLCJjbGFzcyBGb3JtVmFsaWRhdG9yIHtcbiAgY29uc3RydWN0b3IodmFsaWRhdGlvbkNvbmZpZywgZm9ybUVsZW1lbnQpIHtcbiAgICB0aGlzLl9jb25maWcgPSB2YWxpZGF0aW9uQ29uZmlnO1xuICAgIHRoaXMuX2Zvcm1FbGVtZW50ID0gZm9ybUVsZW1lbnQ7XG4gICAgdGhpcy5faW5wdXRMaXN0ID0gQXJyYXkuZnJvbSh0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2NvbmZpZy5pbnB1dFNlbGVjdG9yKSk7XG4gICAgdGhpcy5fZm9ybUJ1dHRvbiA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5fY29uZmlnLnN1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcbiAgfVxuXG4gIF9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XG5cbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9jb25maWcuZXJyb3JDbGFzcyk7XG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gaW5wdXRFbGVtZW50LnZhbGlkYXRpb25NZXNzYWdlO1xuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2NvbmZpZy5pbnB1dEVycm9yQ2xhc3MpO1xuICB9XG5cbiAgX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCkge1xuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYC4ke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgKTtcblxuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2NvbmZpZy5lcnJvckNsYXNzKTtcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSAnJztcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9jb25maWcuaW5wdXRFcnJvckNsYXNzKTtcbiAgfVxuXG4gIF9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KSB7XG4gICAgaWYgKGlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcbiAgICB9XG4gIH1cblxuICBfaGFzSW52YWxpZElucHV0KCkge1xuICAgIHJldHVybiB0aGlzLl9pbnB1dExpc3Quc29tZSgoaW5wdXRFbGVtZW50KSA9PiAhaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKTtcbiAgfVxuXG4gIHRvZ2dsZUJ1dHRvblN0YXRlKCkge1xuICAgIGlmICh0aGlzLl9oYXNJbnZhbGlkSW5wdXQoKSkge1xuICAgICAgdGhpcy5fZm9ybUJ1dHRvbi5jbGFzc0xpc3QuYWRkKHRoaXMuX2NvbmZpZy5pbmFjdGl2ZUJ1dHRvbkNsYXNzKVxuICAgICAgdGhpcy5fZm9ybUJ1dHRvbi5kaXNhYmxlZCA9IHRydWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2Zvcm1CdXR0b24uY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9jb25maWcuaW5hY3RpdmVCdXR0b25DbGFzcylcbiAgICAgIHRoaXMuX2Zvcm1CdXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcbiAgICB9XG4gIH07XG5cbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMudG9nZ2xlQnV0dG9uU3RhdGUoKTtcblxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsICgpID0+IHtcbiAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCk7XG4gICAgICAgIHRoaXMudG9nZ2xlQnV0dG9uU3RhdGUoKVxuICAgICAgfSlcbiAgICB9KVxuXG4gICAgdGhpcy5fZm9ybUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigncmVzZXQnLCAoKSA9PiB7XG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgdGhpcy50b2dnbGVCdXR0b25TdGF0ZSgpO1xuICAgICAgfSwgMClcbiAgICB9KVxuICB9O1xuXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKVxuICB9XG59O1xuXG5leHBvcnQgZGVmYXVsdCBGb3JtVmFsaWRhdG9yO1xuIiwiaW1wb3J0IFwiLi9pbmRleC5jc3NcIjtcbmltcG9ydCB7IFNlY3Rpb24gfSBmcm9tIFwiLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzXCI7XG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtXCI7XG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2VcIjtcbmltcG9ydCBVc2VySW5mbyBmcm9tIFwiLi4vY29tcG9uZW50cy9Vc2VySW5mby5qc1wiO1xuaW1wb3J0IHtcbiAgdGVtcGxhdGUsXG4gIGNhcmRDb250YWluZXIsXG4gIGNhcmRzLFxuICB2YWxpZGF0aW9uQ29uZmlnLFxuICBwb3B1cEltYWdlT3BlbixcbiAgYnV0dG9uT3BlblBvcHVwRWRpdFByb2ZpbGUsXG4gIHBvcHVwRWRpdFByb2ZpbGUsXG4gIHByb2ZpbGVOYW1lLFxuICBwcm9maWxlSm9iLFxuICBidXR0b25PcGVuUG9wdXBBZGRDYXJkLFxuICBwb3B1cENhcmRzLFxufSBmcm9tIFwiLi4vdXRpbHMvY29uc3RhbnRzLmpzXCI7XG5pbXBvcnQgeyBDYXJkIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvQ2FyZFwiO1xuaW1wb3J0IEZvcm1WYWxpZGF0b3IgZnJvbSBcIi4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qc1wiO1xuXG4vL9GN0LrQt9C10LzQv9C70Y/RgCDQtNC70Y8g0L7RgtC60YDRi9GC0LjRjyDQutCw0YDRgtC40L3QutC4XG5jb25zdCBhZGRDYXJkRm9ybSA9IG5ldyBQb3B1cFdpdGhGb3JtKHtcbiAgcG9wdXBTZWxlY3RvcjogcG9wdXBDYXJkcyxcbiAgc3VibWl0Rm9ybTogaGFuZGxlU3VibWl0QWRkQ2FyZEZvcm0sXG59KTtcblxuZnVuY3Rpb24gY3JlYXRlQ2FyZChjYXJkRGF0YSkge1xuICBjb25zdCBjYXJkID0gbmV3IENhcmQoY2FyZERhdGEsIHRlbXBsYXRlLCBoYW5kbGVDYXJkQ2xpY2spO1xuICBjb25zdCBjYXJkRWxlbWVudCA9IGNhcmQuZ2V0Q2FyZCgpXG4gIHJldHVybiBjYXJkRWxlbWVudFxufVxuXG5mdW5jdGlvbiBoYW5kbGVTdWJtaXRBZGRDYXJkRm9ybSh7IGNhcmROYW1lLCBjYXJkTGluayB9KSB7XG4gIGNhcmRMaXN0U2VjdGlvbi5hZGRJdGVtKGNyZWF0ZUNhcmQoe1xuICAgIG5hbWU6IGNhcmROYW1lLFxuICAgIGxpbms6IGNhcmRMaW5rXG4gIH0pKTtcbiAgYWRkQ2FyZEZvcm0uY2xvc2UoKTtcbn1cblxuLy/QvdCw0LLQtdGI0LjQstCw0LXQvCDRgdC70YPRiNCw0YLQtdC70Ywg0YHQvtCx0YvRgtC40Y8g0L7RgtC60YDRi9GC0LjRjyDRgNC10LTQsNC60YLQvtGA0LAg0LrQsNGA0YLQvtGH0LrQuFxuYnV0dG9uT3BlblBvcHVwQWRkQ2FyZC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBhZGRDYXJkRm9ybS5vcGVuKCk7XG59KTtcblxuYWRkQ2FyZEZvcm0uc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuLy/QrdC60LfQtdC80L/Qu9GP0YAg0L/QvtCw0L/QsCDRhNC+0YDQvNGLINGA0LXQtNCw0LrRgtC40YDQvtCy0LDQvdGPINC/0YDQvtGE0LjQu9GPXG5jb25zdCBvcGVuRWRpdFByb2ZpbGUgPSBuZXcgUG9wdXBXaXRoRm9ybSh7XG4gIHBvcHVwU2VsZWN0b3I6IHBvcHVwRWRpdFByb2ZpbGUsXG4gIHN1Ym1pdEZvcm06IG9wZW5Qcm9maWxlUG9wdXAsXG59KTtcblxuZnVuY3Rpb24gb3BlblByb2ZpbGVQb3B1cCh7IGRhdGFOYW1lLCBkYXRhSm9iIH0pIHtcbiAgdmlld1VzZXJJbmZvLnNldFVzZXJJbmZvKHtcbiAgICBkYXRhTmFtZTogZGF0YU5hbWUsXG4gICAgZGF0YUpvYjogZGF0YUpvYlxuICB9KTtcblxuICBvcGVuRWRpdFByb2ZpbGUuY2xvc2UoKTtcbn1cblxub3BlbkVkaXRQcm9maWxlLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbmNvbnN0IHZpZXdVc2VySW5mbyA9IG5ldyBVc2VySW5mbyh7XG4gIGRhdGFOYW1lOiBwcm9maWxlTmFtZSxcbiAgZGF0YUpvYjogcHJvZmlsZUpvYixcbn0pO1xuXG4vLyDQodC70YPRiNCw0YLQtdC70Ywg0L3QsCDQvtGC0LrRgNGL0YLQuNC1INC/0L7Qv9Cw0L/QsCDRgNC10LTQsNC60YLQuNGA0L7QstCw0L3QuNGPINC/0YDQvtGE0LjQu9GPXG5idXR0b25PcGVuUG9wdXBFZGl0UHJvZmlsZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBjb25zdCB7IGRhdGFOYW1lLCBkYXRhSm9iIH0gPSB2aWV3VXNlckluZm8uZ2V0VXNlckluZm8oKTtcbiAgb3BlbkVkaXRQcm9maWxlLnNldElucHV0VmFsdWVzKHtcbiAgICBkYXRhTmFtZSxcbiAgICBkYXRhSm9iXG4gIH0pO1xuXG4gIG9wZW5FZGl0UHJvZmlsZS5vcGVuKCk7XG59KTtcblxuLy8gKtCU0LvRjyDQutCw0LbQtNC+0LPQviDQv9C+0L/QsNC/0LAg0YHQvtC30LTQsNCy0LDQudGC0LUg0YHQstC+0Lkg0Y3QutC30LXQvNC/0LvRj9GAINC60LvQsNGB0YHQsCBQb3B1cFdpdGhGb3JtKlxuY29uc3QgcG9wdXBWaWV3SW1hZ2VzID0gbmV3IFBvcHVwV2l0aEltYWdlKHBvcHVwSW1hZ2VPcGVuKTtcblxucG9wdXBWaWV3SW1hZ2VzLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbi8v0YTRg9C90LrRhtC40Y8g0L7RgtC60YDRi9GC0LjRjyDQv9C+0L/QsNC/0LAg0LrQsNGA0YLQuNC90LrQuFxuZnVuY3Rpb24gaGFuZGxlQ2FyZENsaWNrKG5hbWUsIGxpbmspIHtcbiAgcG9wdXBWaWV3SW1hZ2VzLm9wZW4obmFtZSwgbGluayk7XG59XG5cblxuY29uc3QgY2FyZExpc3RTZWN0aW9uID0gbmV3IFNlY3Rpb24oXG4gIHtcbiAgICBpdGVtczogY2FyZHMsXG4gICAgcmVuZGVyZXI6IChpdGVtKSA9PiB7XG4gICAgY2FyZExpc3RTZWN0aW9uLmFkZEl0ZW0oY3JlYXRlQ2FyZChpdGVtKSlcbiAgICB9XG4gIH0sXG4gIGNhcmRDb250YWluZXJcbik7XG5cbmNhcmRMaXN0U2VjdGlvbi5yZW5kZXJJdGVtcygpO1xuXG4vLyDQstGL0LfQstCw0LvQuCDRhNGD0L3QutGG0LjRjiDQstCw0LvQuNC00LDRhtC40Lgg0YEg0J7QntCfXG5cbmZ1bmN0aW9uIGVuYWJsZVZhbGlkYXRpb24oY29uZmlnKSB7XG4gIGNvbnN0IGZvcm1MaXN0ID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGNvbmZpZy5mb3JtU2VsZWN0b3IpKTtcblxuICBmb3JtTGlzdC5mb3JFYWNoKChmb3JtRWxlbWVudCkgPT4ge1xuICAgIGNvbnN0IGZvcm1JbmZvVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoY29uZmlnLCBmb3JtRWxlbWVudCk7XG4gICAgZm9ybUluZm9WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuICB9KTtcbn1cblxuZW5hYmxlVmFsaWRhdGlvbih2YWxpZGF0aW9uQ29uZmlnKTtcbiJdLCJuYW1lcyI6WyJfX3dlYnBhY2tfcmVxdWlyZV9fIiwiZyIsImdsb2JhbFRoaXMiLCJ0aGlzIiwiRnVuY3Rpb24iLCJlIiwid2luZG93Iiwic2NyaXB0VXJsIiwiaW1wb3J0U2NyaXB0cyIsImxvY2F0aW9uIiwiZG9jdW1lbnQiLCJjdXJyZW50U2NyaXB0Iiwic3JjIiwic2NyaXB0cyIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwibGVuZ3RoIiwiRXJyb3IiLCJyZXBsYWNlIiwicCIsIlNlY3Rpb24iLCJjb250YWluZXJTZWxlY3RvciIsIml0ZW1zIiwicmVuZGVyZXIiLCJfY2FyZHMiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwiZm9yRWFjaCIsIml0ZW0iLCJlbGVtZW50IiwicHJlcGVuZCIsIlBvcHVwIiwicG9wdXBTZWxlY3RvciIsIl9wb3B1cEl0ZW0iLCJfY2xvc2VCdXR0b24iLCJxdWVyeVNlbGVjdG9yIiwiX2hhbmRsZUVzY0Nsb3NlIiwiYmluZCIsImV2dCIsImtleSIsImNsb3NlIiwiZXZlbnQiLCJ0YXJnZXQiLCJjdXJyZW50VGFyZ2V0IiwiY2xhc3NMaXN0IiwiYWRkIiwiYWRkRXZlbnRMaXN0ZW5lciIsInJlbW92ZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJfaGFuZGxlQ2xvc2VPdmVybGF5IiwiUG9wdXBXaXRoRm9ybSIsInN1Ym1pdEZvcm0iLCJfc3VibWl0Rm9ybSIsIl9wb3B1cEZvcm0iLCJfZm9ybUxpc3QiLCJxdWVyeVNlbGVjdG9yQWxsIiwiZGF0YSIsImlucHV0IiwidmFsdWUiLCJuYW1lIiwiaW5wdXRWYWx1ZSIsInByZXZlbnREZWZhdWx0IiwiX2dldElucHV0VmFsdWVzIiwicmVzZXQiLCJQb3B1cFdpdGhJbWFnZSIsIl9wb3B1cFNlbGVjdG9yIiwiX3BvcHVwSW1hZ2UiLCJfcG9wdXBDYXB0aW9uIiwibGluayIsImFsdCIsInRleHRDb250ZW50IiwiVXNlckluZm8iLCJkYXRhTmFtZSIsImRhdGFKb2IiLCJfbmFtZUVsZW1lbnQiLCJfam9iRWxlbWVudCIsImJ1dHRvbk9wZW5Qb3B1cEVkaXRQcm9maWxlIiwicG9wdXBFZGl0UHJvZmlsZSIsInBvcHVwRm9ybUVkaXQiLCJwcm9maWxlSW5mbyIsInByb2ZpbGVOYW1lIiwicHJvZmlsZUpvYiIsInRlbXBsYXRlIiwiY2FyZENvbnRhaW5lciIsInBvcHVwSW1hZ2VPcGVuIiwiYnV0dG9uT3BlblBvcHVwQWRkQ2FyZCIsInBvcHVwQ2FyZHMiLCJjYXJkcyIsIkNhcmRJbWFnZXNDb2ZmZSIsIkNhcmRJbWFnZXNKdWljZSIsIkNhcmRJbWFnZXNQaWFubyIsIkNhcmRJbWFnZXNDb3NtbyIsIkNhcmRJbWFnZXNQaXp6YSIsIkNhcmRJbWFnZXNQaG90byIsIkNhcmQiLCJjYXJkRGF0YSIsInNlbGVjdG9yIiwiaGFuZGxlQ2FyZENsaWNrIiwiX25hbWUiLCJfbGluayIsIl9oYW5kbGVDYXJkQ2xpY2siLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiX2xpa2VCdXR0b24iLCJfY2FyZFRpdGxlIiwiX2NhcmRJbWFnZSIsIl9idXR0b25UcmFzaCIsInNldEF0dHJpYnV0ZSIsInRvZ2dsZSIsIl9kZWxldGVDYXJkIiwiX3RvZ2dsZUxpa2UiLCJfc2V0Q2FyZFRpdGxlIiwiX3NldENhcmRJbWFnZSIsIl9zZXRFdmVudExpc3RlbmVycyIsInZhbGlkYXRpb25Db25maWciLCJmb3JtRWxlbWVudCIsIl9jb25maWciLCJfZm9ybUVsZW1lbnQiLCJfaW5wdXRMaXN0IiwiQXJyYXkiLCJmcm9tIiwiaW5wdXRTZWxlY3RvciIsIl9mb3JtQnV0dG9uIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJpbnB1dEVsZW1lbnQiLCJlcnJvckVsZW1lbnQiLCJpZCIsImVycm9yQ2xhc3MiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsImlucHV0RXJyb3JDbGFzcyIsInZhbGlkaXR5IiwidmFsaWQiLCJfaGlkZUlucHV0RXJyb3IiLCJfc2hvd0lucHV0RXJyb3IiLCJzb21lIiwiX2hhc0ludmFsaWRJbnB1dCIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJkaXNhYmxlZCIsInRvZ2dsZUJ1dHRvblN0YXRlIiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsInNldFRpbWVvdXQiLCJhZGRDYXJkRm9ybSIsImNhcmROYW1lIiwiY2FyZExpbmsiLCJjYXJkTGlzdFNlY3Rpb24iLCJhZGRJdGVtIiwiY3JlYXRlQ2FyZCIsImdldENhcmQiLCJvcGVuIiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJvcGVuRWRpdFByb2ZpbGUiLCJ2aWV3VXNlckluZm8iLCJzZXRVc2VySW5mbyIsImdldFVzZXJJbmZvIiwic2V0SW5wdXRWYWx1ZXMiLCJwb3B1cFZpZXdJbWFnZXMiLCJjb25maWciLCJyZW5kZXJJdGVtcyIsImZvcm1TZWxlY3RvciIsImFjdGl2ZUJ1dHRvbkNsYXNzIiwiRm9ybVZhbGlkYXRvciIsImVuYWJsZVZhbGlkYXRpb24iXSwic291cmNlUm9vdCI6IiJ9