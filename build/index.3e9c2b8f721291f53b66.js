(()=>{"use strict";const e=document.querySelector(".popup_image-open"),t=e.querySelector(".popup__image"),n=e.querySelector(".popup__caption");class o{constructor(e,t,n){this._name=e.name,this._link=e.link,this._openPopup=n,this._container=t.content.querySelector(".element").cloneNode(!0)}_setLikeButton(){const e=this._container.querySelector(".element__button-like");return e.addEventListener("click",(()=>{e.classList.toggle("element__button-like_active")})),e}_setTrashButton(){const e=this._container.querySelector(".element__button-trash");return e.addEventListener("click",(()=>{this._container.remove()})),e}_setCardImage(){const o=this._container.querySelector(".element__photo");return o.setAttribute("src",this._link),o.setAttribute("alt",this._name),o.addEventListener("click",(()=>{t.setAttribute("src",this._link),t.setAttribute("alt",this._name),n.textContent=this._name,this._openPopup(e)})),o}_setCardTitle(){const e=this._container.querySelector(".element__title");return e.textContent=this._name,e}getCard(){return this._setLikeButton(),this._setTrashButton(),this._setCardTitle(),this._setCardImage(),this._container}}const r=document.querySelector(".profile__edit"),i=document.querySelector(".popup_edit-profile"),s=document.querySelector(".popup__close"),c=document.querySelector("#popup-form"),u=document.querySelector("#popup-form-card"),a=c.querySelector("#input-name"),l=c.querySelector("#input-job"),p=document.querySelector(".profile__info"),_=p.querySelector(".profile__name"),d=p.querySelector(".profile__aboute");function m(e){e.classList.add("popup_opened"),document.addEventListener("keydown",f),e.addEventListener("click",v)}function h(e){e.classList.remove("popup_opened"),document.removeEventListener("keydown",f),e.removeEventListener("click",v)}const v=e=>{e.target===e.currentTarget&&h(e.target)};function f(e){"Escape"===e.key&&h(document.querySelector(".popup_opened"))}r.addEventListener("click",(function(e){m(i),a.value=_.textContent,l.value=d.textContent})),s.addEventListener("click",(()=>{h(i)}));const g=document.querySelector("#card-item-template"),y=document.querySelector(".elements"),S=e=>{const t=new o(e,g,m);y.prepend(t.getCard())};document.querySelector(".popup__close-image").addEventListener("click",(()=>{h(e)})),[{name:"Coffee",link:"../src/images/coffe.jpg"},{name:"Глинтвейн",link:"./images/orange-juice.png"},{name:"Пианист",link:"./images/piano.png"},{name:"Космонавт",link:"./images/CCCP.png"},{name:"Вкуснотища!",link:"./images/pizza.png"},{name:"Челябинская область",link:"./images/photograph.jpg"}].forEach((e=>{S(e)}));const E=document.querySelector(".profile__add-button"),k=document.querySelector(".popup-cards"),q=k.querySelector("#card-name"),L=k.querySelector("#card-link");var C;E.addEventListener("click",(()=>{m(k)})),document.querySelector(".popup__cards-close").addEventListener("click",(()=>{h(k)})),u.addEventListener("submit",(e=>{e.preventDefault();const t={name:q.value,link:L.value};t.name&&t.link&&(S(t),h(k),e.target.reset())})),c.addEventListener("submit",(function(e){e.preventDefault();const t=a.value,n=l.value;_.textContent=t,d.textContent=n,h(i)})),C={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__submit-button",activeButtonClass:"popup__submit-button_valid",inactiveButtonClass:"popup__submit-button_invalid",inputErrorClass:"popup__input_type_error",errorClass:"popup__input-error_visible"},Array.from(document.querySelectorAll(C.formSelector)).forEach((e=>{new class{constructor(e,t){this._config=e,this._formElement=t,this._inputList=Array.from(this._formElement.querySelectorAll(this._config.inputSelector)),this._formButton=this._formElement.querySelector(this._config.submitButtonSelector)}_showInputError(e){const t=this._formElement.querySelector(`.${e.id}-error`);t.classList.add(this._config.errorClass),t.textContent=e.validationMessage,e.classList.add(this._config.inputErrorClass)}_hideInputError(e){const t=this._formElement.querySelector(`.${e.id}-error`);t.classList.remove(this._config.errorClass),t.textContent="",e.classList.remove(this._config.inputErrorClass)}_checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}_hasInvalidInput(){return this._inputList.some((e=>!e.validity.valid))}toggleButtonState(){this._hasInvalidInput()?(this._formButton.classList.add(this._config.inactiveButtonClass),this._formButton.disabled=!0):(this._formButton.classList.remove(this._config.inactiveButtonClass),this._formButton.disabled=!1)}_setEventListeners(){this.toggleButtonState(),this._inputList.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this.toggleButtonState()}))})),this._formElement.addEventListener("reset",(()=>{setTimeout((()=>{this.toggleButtonState()}),0)}))}enableValidation(){this._setEventListeners()}}(C,e).enableValidation()}))})();