(()=>{"use strict";var t={};t.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),(()=>{var e;t.g.importScripts&&(e=t.g.location+"");var n=t.g.document;if(!e&&n&&(n.currentScript&&(e=n.currentScript.src),!e)){var r=n.getElementsByTagName("script");r.length&&(e=r[r.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),t.p=e})();const e=[{name:"Coffee",link:t.p+"0d930819a1b441eca091.jpg"},{name:"Глинтвейн",link:"./images/orange-juice.png"},{name:"Пианист",link:"./images/piano.png"},{name:"Космонавт",link:"./images/CCCP.png"},{name:"Вкуснотища!",link:"./images/pizza.png"},{name:"Челябинская область",link:"./images/photograph.jpg"}],n=document.querySelector(".popup_image-open"),r=n.querySelector(".popup__image"),o=n.querySelector(".popup__caption");class i{constructor(t,e,n){this._name=t.name,this._link=t.link,this._openPopup=n,this._container=e.content.querySelector(".element").cloneNode(!0)}_setLikeButton(){const t=this._container.querySelector(".element__button-like");return t.addEventListener("click",(()=>{t.classList.toggle("element__button-like_active")})),t}_setTrashButton(){const t=this._container.querySelector(".element__button-trash");return t.addEventListener("click",(()=>{this._container.remove()})),t}_setCardImage(){const t=this._container.querySelector(".element__photo");return t.setAttribute("src",this._link),t.setAttribute("alt",this._name),t.addEventListener("click",(()=>{r.setAttribute("src",this._link),r.setAttribute("alt",this._name),o.textContent=this._name,this._openPopup(n)})),t}_setCardTitle(){const t=this._container.querySelector(".element__title");return t.textContent=this._name,t}getCard(){return this._setLikeButton(),this._setTrashButton(),this._setCardTitle(),this._setCardImage(),this._container}}const s=document.querySelector(".profile__edit"),c=document.querySelector(".popup_edit-profile"),u=document.querySelector(".popup__close"),a=document.querySelector("#popup-form"),l=document.querySelector("#popup-form-card"),p=a.querySelector("#input-name"),_=a.querySelector("#input-job"),d=document.querySelector(".profile__info"),m=d.querySelector(".profile__name"),h=d.querySelector(".profile__aboute");function g(t){t.classList.add("popup_opened"),document.addEventListener("keydown",y),t.addEventListener("click",v)}function f(t){t.classList.remove("popup_opened"),document.removeEventListener("keydown",y),t.removeEventListener("click",v)}const v=t=>{t.target===t.currentTarget&&f(t.target)};function y(t){"Escape"===t.key&&f(document.querySelector(".popup_opened"))}s.addEventListener("click",(function(t){g(c),p.value=m.textContent,_.value=h.textContent})),u.addEventListener("click",(()=>{f(c)}));const S=document.querySelector("#card-item-template"),E=document.querySelector(".elements"),b=t=>{const e=new i(t,S,g);E.prepend(e.getCard())};document.querySelector(".popup__close-image").addEventListener("click",(()=>{f(n)})),e.forEach((t=>{b(t)}));const k=document.querySelector(".profile__add-button"),q=document.querySelector(".popup-cards"),L=q.querySelector("#card-name"),C=q.querySelector("#card-link");var B;k.addEventListener("click",(()=>{g(q)})),document.querySelector(".popup__cards-close").addEventListener("click",(()=>{f(q)})),l.addEventListener("submit",(t=>{t.preventDefault();const e={name:L.value,link:C.value};e.name&&e.link&&(b(e),f(q),t.target.reset())})),a.addEventListener("submit",(function(t){t.preventDefault();const e=p.value,n=_.value;m.textContent=e,h.textContent=n,f(c)})),B={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__submit-button",activeButtonClass:"popup__submit-button_valid",inactiveButtonClass:"popup__submit-button_invalid",inputErrorClass:"popup__input_type_error",errorClass:"popup__input-error_visible"},Array.from(document.querySelectorAll(B.formSelector)).forEach((t=>{new class{constructor(t,e){this._config=t,this._formElement=e,this._inputList=Array.from(this._formElement.querySelectorAll(this._config.inputSelector)),this._formButton=this._formElement.querySelector(this._config.submitButtonSelector)}_showInputError(t){const e=this._formElement.querySelector(`.${t.id}-error`);e.classList.add(this._config.errorClass),e.textContent=t.validationMessage,t.classList.add(this._config.inputErrorClass)}_hideInputError(t){const e=this._formElement.querySelector(`.${t.id}-error`);e.classList.remove(this._config.errorClass),e.textContent="",t.classList.remove(this._config.inputErrorClass)}_checkInputValidity(t){t.validity.valid?this._hideInputError(t):this._showInputError(t)}_hasInvalidInput(){return this._inputList.some((t=>!t.validity.valid))}toggleButtonState(){this._hasInvalidInput()?(this._formButton.classList.add(this._config.inactiveButtonClass),this._formButton.disabled=!0):(this._formButton.classList.remove(this._config.inactiveButtonClass),this._formButton.disabled=!1)}_setEventListeners(){this.toggleButtonState(),this._inputList.forEach((t=>{t.addEventListener("input",(()=>{this._checkInputValidity(t),this.toggleButtonState()}))})),this._formElement.addEventListener("reset",(()=>{setTimeout((()=>{this.toggleButtonState()}),0)}))}enableValidation(){this._setEventListeners()}}(B,t).enableValidation()}))})();